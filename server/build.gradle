plugins {
  id "com.linkedin.python-cli" version "0.6.1"
}

buildDir = "../bin/server"

repositories {
   pyGradlePyPi()
 }

description = 'Server Build'

task copyTests(type: Copy){
  from '../shared/test'
  from '../shared/src'
  from 'test'
  from 'src'
  include '*.py'
  into '../bin/server/test'
}

task copyLibTest(type: Copy){
  from '../shared/lib'
  from './lib'
  into '../bin/server/test'
}

task copyLib(type: Copy){
  dependsOn copyLibTest
  from '../shared/lib'
  from './lib'
  into '../bin/server/src'
}


task copyConfig(type: Copy){
  from './config'
  exclude 'config.example'
  into '../bin/server/config'
}

task copy(type: Copy) {
  from '../shared/src'
  from 'src'
  include '*.py'
  into '../bin/server/src'
}

task doBuild(){
  dependsOn copyConfig
  dependsOn copy
  dependsOn copyTests
  dependsOn copyLib
}
